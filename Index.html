
<!DOCTYPE html>
<html lang="ar">
<head>
<meta charset="UTF-8">
<title>Ù…Ø­ÙˆÙ„ Ø§Ù„ÙŠÙˆØ±Ùˆ</title>
<style>
/* Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø£Ø³Ø§Ø³ÙŠØ© */
body {
  font-family: 'Segoe UI', Tahoma, sans-serif;
  direction: rtl;
  background: linear-gradient(135deg, #89f7fe 0%, #66a6ff 100%);
  margin: 0;
  display: flex;
  justify-content: center;
  align-items: center;
  height: 100vh;
}

/* Ø§Ù„Ø´Ø§Ø´Ø§Øª */
.screen {
  display: none;
  width: 100%;
  max-width: 450px;
  padding: 20px;
}
.screen.active {
  display: block;
}

/* Ø§Ù„Ø¨Ø·Ø§Ù‚Ø© */
.card {
  background: #ffffffdd;
  border-radius: 20px;
  padding: 30px;
  box-shadow: 0 10px 30px rgba(0,0,0,0.15);
  text-align: center;
}

/* Ø§Ù„Ø¹Ù†Ø§ÙˆÙŠÙ† */
h2 {
  margin-bottom: 25px;
  color: #333;
}

/* Ø§Ù„Ø­Ù‚ÙˆÙ„ */
input {
  width: 90%;
  padding: 14px;
  font-size: 18px;
  border-radius: 12px;
  border: 1px solid #ccc;
  margin-bottom: 20px;
}

/* Ø§Ù„Ø£Ø²Ø±Ø§Ø± */
button {
  width: 90%;
  padding: 14px;
  font-size: 18px;
  margin: 8px 0;
  border: none;
  border-radius: 12px;
  cursor: pointer;
  transition: 0.3s;
}
button:hover { opacity: 0.9; }

button.voice {
  background-color: #10b981;
  color: white;
}
button.confirm {
  background-color: #3b82f6;
  color: white;
}
button.reset {
  background-color: #f59e0b;
  color: white;
}

/* Ø§Ù„Ù†ØªØ§Ø¦Ø¬ */
.result {
  font-size: 22px;
  margin-top: 20px;
  color: #111;
  font-weight: bold;
}
</style>
</head>

<body>

<!-- Ø§Ù„Ø´Ø§Ø´Ø© 1 -->
<div class="screen active" id="screen1">
  <div class="card">
    <h2>ÙƒÙ… Ø³Ø¹Ø± 100 ÙŠÙˆØ±ÙˆØŸ</h2>
    <input id="rateInput" placeholder="Ø£Ø¯Ø®Ù„ Ø§Ù„Ø³Ø¹Ø± Ø£Ùˆ Ø§Ù†Ø·Ù‚">
    <button class="voice" onclick="voiceInput('rateInput')">ğŸ¤ Ù†Ø·Ù‚</button>
    <button class="confirm" onclick="confirmRate()">Ù…ÙˆØ§ÙÙ‚</button>
  </div>
</div>

<!-- Ø§Ù„Ø´Ø§Ø´Ø© 2 -->
<div class="screen" id="screen2">
  <div class="card">
    <h2>ÙƒÙ… ØªØ±ÙŠØ¯ Ø£Ù† ØªØ­ÙˆÙ‘Ù„ Ø¨Ø§Ù„ÙŠÙˆØ±ÙˆØŸ</h2>
    <input id="euroInput" placeholder="Ø¹Ø¯Ø¯ Ø§Ù„ÙŠÙˆØ±Ùˆ">
    <button class="voice" onclick="voiceInput('euroInput')">ğŸ¤ Ù†Ø·Ù‚</button>
    <button class="confirm" onclick="confirmEuro()">Ù…ÙˆØ§ÙÙ‚</button>
  </div>
</div>

<!-- Ø§Ù„Ø´Ø§Ø´Ø© 3 -->
<div class="screen" id="screen3">
  <div class="card">
    <h2>Ø§Ù„Ù†ØªÙŠØ¬Ø©</h2>
    <div class="result" id="numericResult"></div>
    <div class="result" id="textResult"></div>
    <button class="reset" onclick="resetApp()">ğŸ”„ Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„Ø­Ø³Ø§Ø¨</button>
  </div>
</div>

<script>
let exchangeRate = 0;

/* ğŸ¤ Ø¥Ø¯Ø®Ø§Ù„ ØµÙˆØªÙŠ Ù…ØªÙ‚Ø¯Ù… */
function voiceInput(id) {
  const r = new (window.SpeechRecognition || window.webkitSpeechRecognition)();
  r.lang = 'ar';
  r.start();
  r.onresult = e => {
    const text = e.results[0][0].transcript;
    const num = parseArabicSentence(text);
    document.getElementById(id).value = num || text;
  };
}

/* ğŸ§  ØªØ­Ù„ÙŠÙ„ Ø¬Ù…Ù„Ø© Ø¹Ø±Ø¨ÙŠØ© ÙƒØ§Ù…Ù„Ø© Ø¥Ù„Ù‰ Ø±Ù‚Ù… (ÙØµØ­Ù‰ + Ù„Ù‡Ø¬Ø© Ù…Ø­Ù„ÙŠØ©) */
function parseArabicSentence(text) {
  text = text.replace(/Ø­ÙˆØ§Ù„ÙŠ|ØªÙ‚Ø±ÙŠØ¨Ø§|ØªÙ‚Ø±ÙŠØ¨Ù‹Ø§|Ø³Ø¹Ø±|Ø§Ù„ØµØ±Ù|Ù‡Ùˆ|ÙŠÙˆØ±Ùˆ|Ø¯ÙŠÙ†Ø§Ø±/g, '');
  const words = text.split(' ');

  const map = {
    /* ÙØµØ­Ù‰ */
    ØµÙØ±:0, ÙˆØ§Ø­Ø¯:1, Ø§Ø«Ù†ÙŠÙ†:2, Ø§Ø«Ù†Ø§Ù†:2, Ø«Ù„Ø§Ø«Ø©:3, Ø£Ø±Ø¨Ø¹Ø©:4, Ø®Ù…Ø³:5, Ø®Ù…Ø³Ø©:5,
    Ø³ØªØ©:6, Ø³Ø¨Ø¹Ø©:7, Ø«Ù…Ø§Ù†ÙŠØ©:8, ØªØ³Ø¹Ø©:9, Ø¹Ø´Ø±Ø©:10,
    Ø¹Ø´Ø±ÙˆÙ†:20, Ø«Ù„Ø§Ø«ÙˆÙ†:30, Ø£Ø±Ø¨Ø¹ÙˆÙ†:40, Ø®Ù…Ø³ÙˆÙ†:50, Ø³ØªÙˆÙ†:60, Ø³Ø¨Ø¹ÙˆÙ†:70,
    Ø«Ù…Ø§Ù†ÙˆÙ†:80, ØªØ³Ø¹ÙˆÙ†:90,
    Ù…Ø¦Ø©:100, Ù…Ø§Ø¦Ø©:100, Ù…Ø¦ØªÙŠÙ†:200, Ù…Ø¦ØªØ§Ù†:200,
    Ø£Ù„Ù:1000, Ø£Ù„ÙÙŠÙ†:2000,
    Ù…Ù„ÙŠÙˆÙ†:200000, Ù…Ù„ÙŠÙˆÙ†ÙŠÙ†:400000,
    /* Ù„Ù‡Ø¬Ø© Ù…Ø­Ù„ÙŠØ© */
    Ø®Ù…Ø³Ù…ÙŠØ©:500, Ø³ØªÙ…ÙŠØ©:600, Ø³Ø¨Ø¹Ù…ÙŠØ©:700, ØªÙ…Ø§Ù†Ù…ÙŠØ©:800, ØªØ³Ø¹Ù…ÙŠØ©:900
  };

  let total = 0;
  let current = 0;

  words.forEach(w => {
    if (map[w] !== undefined) {
      if (map[w] >= 1000) {
        current = (current || 1) * map[w];
        total += current;
        current = 0;
      } else {
        current += map[w];
      }
    }
  });

  return total + current || null;
}

/* âœ… ØªØµØ­ÙŠØ­ Ø³Ø¹Ø± Ø§Ù„ØµØ±Ù */
function normalizeRate(v) {
  let n = parseInt(v);
  if (isNaN(n)) return null;
  while (n < 520000) n *= 10;
  return (n >= 520000 && n <= 600000) ? n : null;
}

function confirmRate() {
  const n = normalizeRate(rateInput.value);
  if (!n) return alert('Ù‚ÙŠÙ…Ø© ØºÙŠØ± ØµØ­ÙŠØ­Ø©');
  exchangeRate = n;
  show(2);
}

function confirmEuro() {
  const euro = parseInt(euroInput.value);
  if (isNaN(euro)) return alert('Ù‚ÙŠÙ…Ø© ØºÙŠØ± ØµØ­ÙŠØ­Ø©');
  const result = Math.round((euro * exchangeRate) / 100);
  showResult(result);
}

/* ğŸ”¢ ØªØ­ÙˆÙŠÙ„ Ø§Ù„Ø±Ù‚Ù… Ø¥Ù„Ù‰ ÙƒØªØ§Ø¨Ø© */
function numberToWords(n) {
  let parts = [];
  let millions = Math.floor(n / 200000);
  let rem = n % 200000;

  if (millions === 1) parts.push('Ù…Ù„ÙŠÙˆÙ†');
  else if (millions === 2) parts.push('Ù…Ù„ÙŠÙˆÙ†ÙŠÙ†');
  else if (millions > 2) parts.push(millions + ' Ù…Ù„Ø§ÙŠÙŠÙ†');

  let hundredThousands = Math.floor(rem / 100000);
  rem %= 100000;
  if (hundredThousands) parts.push('Ù…Ø§Ø¦Ø©');

  let tenThousands = Math.floor(rem / 10000);
  rem %= 10000;
  if (tenThousands)
    parts.push(['','Ø¹Ø´Ø±Ø©','Ø¹Ø´Ø±ÙˆÙ†','Ø«Ù„Ø§Ø«ÙˆÙ†','Ø£Ø±Ø¨Ø¹ÙˆÙ†','Ø®Ù…Ø³ÙˆÙ†','Ø³ØªÙˆÙ†','Ø³Ø¨Ø¹ÙˆÙ†','Ø«Ù…Ø§Ù†ÙˆÙ†','ØªØ³Ø¹ÙˆÙ†'][tenThousands] + ' Ø£Ù„ÙÙ‹Ø§');

  let hundreds = Math.floor(rem / 100);
  if (hundreds)
    parts.push(['','Ù…Ø§Ø¦Ø©','Ù…Ø¦ØªØ§Ù†','Ø«Ù„Ø§Ø« Ù…Ø¦Ø©','Ø£Ø±Ø¨Ø¹ Ù…Ø¦Ø©','Ø®Ù…Ø³ Ù…Ø¦Ø©','Ø³Øª Ù…Ø¦Ø©','Ø³Ø¨Ø¹ Ù…Ø¦Ø©','Ø«Ù…Ø§Ù† Ù…Ø¦Ø©','ØªØ³Ø¹ Ù…Ø¦Ø©'][hundreds]);

  return parts.join(' Ùˆ ');
}

/* Ø¹Ø±Ø¶ Ø§Ù„Ù†ØªÙŠØ¬Ø© */
function showResult(v) {
  numericResult.innerText = v.toLocaleString('fr-FR');
  const text = numberToWords(v);
  textResult.innerText = text;
  speechSynthesis.speak(new SpeechSynthesisUtterance(text));
  show(3);
}

/* ğŸ”„ Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„Ø­Ø³Ø§Ø¨ */
function resetApp() {
  exchangeRate = 0;
  rateInput.value = '';
  euroInput.value = '';
  show(1);
}

/* ØªØ¨Ø¯ÙŠÙ„ Ø§Ù„Ø´Ø§Ø´Ø§Øª */
function show(n) {
  document.querySelectorAll('.screen').forEach(s=>s.classList.remove('active'));
  document.getElementById('screen'+n).classList.add('active');
}
</script>

</body>
  </html>
